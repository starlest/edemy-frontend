<ed-header title="Online Lessons"></ed-header>

<div class="wrapper">
  <div class="filters">
    <div class="filter">
      <ng-select [items]="subjects"
                 (selected)="selectedSubjectFilter($event)"
                 placeholder="Subject">
      </ng-select>
    </div>
    <div class="filter">
      <ng-select [items]="levels"
                 (selected)="selectedLevelFilter($event)"
                 placeholder="Level">
      </ng-select>
    </div>
  </div>

  <div *ngFor="let subject of subjects$ | async">

    <div class="subject"
         *ngIf="subject.Title !== 'All' && (lessons$[subject.Title] | async).length > 0">
      <h1>{{subject.Title}}</h1>
    </div>

    <div class="lessons-wrapper">
      <div class="lesson"
           *ngFor="let lesson of lessons$[subject.Title] | async">
        <a routerLink="/onlinelessons/{{lesson.Id}}">
          <img [src]="getSubjectIconPath(subject.Title)">
          <span class="lesson-info">
            <h2>{{lesson.Title}}</h2>
            <div class="lesson-description">
              {{lesson.Description}}
            </div>
              <ul class="levels-list">
                <li *ngFor="let level of lesson.Levels" class="lesson-level">
                  <span class="badge"
                        [ngClass]="{
                        'badge-info': level.includes('Primary'),
                        'badge-primary': level.includes('Secondary'),
                        'badge-success': !level.includes('Primary') && !level.includes('Secondary')
                        }">
                    {{level}}
                  </span>
                </li>
              </ul>
          </span>
        </a>
      </div>
    </div>

  </div>
</div>
